## 二维几何变换



### 二维变换

![image-20210222140039880](.\img\image-20210222140039880.png)


$$
x^{'}=x+t_{x}\\
y^{'}=y+t_{y}
$$
那么用矩阵表示就是
$$
T=\left[ 
\begin{matrix}
t_{x}\\
t_{y}
\end{matrix}
\right]\\

P^{'} = T+P=\left[ 
\begin{matrix}
t_{x}\\
t_{y}
\end{matrix}
\right] + \left[ 
\begin{matrix}
x\\
y
\end{matrix}
\right]=\left[ 
\begin{matrix}
x^{'}\\
y^{'}
\end{matrix}
\right]
$$

```python
import cv2 as cv
import numpy as np
import matplotlib.pyplot as plt

# 图像的宽高
w = 500
h = 500
d = 3
shape = (w, h, d)
# 一个三角形
triangle = np.array([[200, 200], [100, 100], [100, 200]], np.int32)
img = np.zeros(shape, np.uint8)
# 轴线
cv.line(img, (0, h // 2), (w, h // 2), (255, 255, 255))
cv.line(img, (w // 2, 0), (w // 2, h), (255, 255, 255))
# 画出多边形
cv.polylines(img, [triangle], True, (255, 255, 255))
cv.fillPoly(img, [triangle], (255, 255, 255))
# 位移
tx, ty = (200, 50)
# 从新定义三角形
triangle = np.array([[200 + tx, 200 + ty], [100 + tx, 100 + ty], [100 + tx, 200 + ty]], np.int32)
cv.polylines(img, [triangle], True, (0, 255, 255))
cv.fillPoly(img, [triangle], (0, 255, 255))

# cv.namedWindow('text', cv.WINDOW_AUTOSIZE)
# cv.imshow('text', img)
# cv.waitKey(0)
# cv.destroyAllWindows()

plt.figure(figsize=(8, 8))
plt.imshow(img[:, :, ::-1])
plt.show()
```

![image-20210222142718183](.\img\image-20210222142718183.png)



### 二维旋转

1. 相对原点旋转

![image-20210222143336677](C:\Users\LIHAO\Desktop\Slash\opencv\img\image-20210222143336677.png)


$$
x^{'}=r\cos(\theta+\phi)=r\cos\theta\cos\phi - r\sin\theta\sin\phi\\
y^{'}=r\sin(\theta+\phi)=r\cos\theta\sin\phi+r\sin\theta\cos\phi
$$

$$
\because  x=r\cos\phi  , y=r\sin\phi\\

\therefore x^{'}=x\cos\phi - y\sin\phi\\
y^{'}=x\sin\phi + y\cos\phi
$$
用矩阵表示就是


$$
P^{'}=R\cdot P=\left[
\begin{matrix}
\cos\phi & -\sin\phi\\
\sin\phi&\cos\phi
\end{matrix}
\right]\cdot\left[
\begin{matrix}
x \\
y
\end{matrix}
\right]
$$


2. 相对一个固定点旋转

   ![image-20210222144749868](.\img\image-20210222144749868.png)




$$
x^{'}=x_{r}+(x-x_{r})\cos\theta-(y-y_{r})\sin\theta\\
y^{'}=y_{r}+(x-x_{r})\sin\theta+(y-y_{r})\cos\theta\\
$$

```python
import cv2 as cv
import numpy as np
import matplotlib.pyplot as plt
import math

w = 500
h = 500
d = 3
shape = (w, h, d)
p1 = [200, 200]
p2 = [100, 50]
p3 = [60, 150]

triangle = np.array([p1, p2, p3], np.int32)
img = np.zeros(shape, np.uint8)
cv.line(img, (0, h // 2), (w, h // 2), (255, 255, 255))
cv.line(img, (w // 2, 0), (w // 2, h), (255, 255, 255))
cv.polylines(img, [triangle], True, (255, 255, 255))
cv.fillPoly(img, [triangle], (255, 255, 255))

# 转180度
theta = math.pi
# 围绕该点进行旋转
xr, yr = (w // 2, h // 2 - 100)

p1nx = xr + (p1[0] - xr) * math.cos(theta) - (p1[1] - yr) * math.sin(theta)
p1ny = yr + (p1[0] - xr) * math.sin(theta) + (p1[1] - yr) * math.cos(theta)
p1 = (p1nx, p1ny)

p2nx = xr + (p2[0] - xr) * math.cos(theta) - (p2[1] - yr) * math.sin(theta)
p2ny = yr + (p2[0] - xr) * math.sin(theta) + (p2[1] - yr) * math.cos(theta)
p2 = (p2nx, p2ny)

p3nx = xr + (p3[0] - xr) * math.cos(theta) - (p3[1] - yr) * math.sin(theta)
p3ny = yr + (p3[0] - xr) * math.sin(theta) + (p3[1] - yr) * math.cos(theta)
p3 = (p3nx, p3ny)

triangle = np.array([p1, p2, p3], np.int32)
cv.polylines(img, [triangle], True, (0, 255, 255))
cv.fillPoly(img, [triangle], (0, 255, 255))

# cv.namedWindow('text', cv.WINDOW_AUTOSIZE)
# cv.imshow('text', img)
# cv.waitKey(0)
# cv.destroyAllWindows()

plt.figure(figsize=(8, 8))
plt.imshow(img[:, :, ::-1])
plt.show()
```

![image-20210222150338670](.\img\image-20210222150338670.png)



### 二维缩放


$$
x^{'}= x \cdot s_{x}\\
y^{'}=y \cdot s_{y}
$$
用矩阵表示
$$
P^{'}=S\cdot P = \left[
\begin{matrix}
s_{x}&0\\
0&s_{y}
\end{matrix}
\right]\cdot\left[
\begin{matrix}
x\\
y
\end{matrix}
\right]
$$
相对固定点缩放
$$
x^{'}-x_{f} = (x-x_{f})\cdot s_{x}\\
y^{'}-y_{f} = (y-y_{f})\cdot s_{y}\\
$$

$$
x^{'} = x\cdot s_{x} +  x_{f} \cdot (1-s_{x})\\
y^{'} = y\cdot s_{y} +  y_{f} \cdot (1-s_{y})\\
$$
后面的可是对任何点的常数

```python
import cv2 as cv
import numpy as np
import matplotlib.pyplot as plt
import math

w = 500
h = 500
d = 3
shape = (w, h, d)
p1 = [200, 200]
p2 = [100, 50]
p3 = [60, 150]

triangle = np.array([p1, p2, p3], np.int32)
img = np.zeros(shape, np.uint8)
cv.line(img, (0, h // 2), (w, h // 2), (255, 255, 255))
cv.line(img, (w // 2, 0), (w // 2, h), (255, 255, 255))
cv.polylines(img, [triangle], True, (255, 255, 255))
cv.fillPoly(img, [triangle], (255, 255, 255))


# 围绕该点进行缩放
xf, yf = (w // 2, h // 2)
sx, sy = (0.5, 0.5)

vx = xf * (1 - sx)
vy = yf * (1 - sy)

p1nx = p1[0] * sx + vx
p1ny = p1[1] * sy + vy
p1 = (p1nx, p1ny)

p2nx = p2[0] * sx + vx
p2ny = p2[1] * sy + vy
p2 = (p2nx, p2ny)

p3nx = p3[0] * sx + vx
p3ny = p3[1] * sy + vy
p3 = (p3nx, p3ny)

triangle = np.array([p1, p2, p3], np.int32)
cv.polylines(img, [triangle], True, (0, 255, 255))
cv.fillPoly(img, [triangle], (0, 255, 255))

# cv.namedWindow('text', cv.WINDOW_AUTOSIZE)
# cv.imshow('text', img)
# cv.waitKey(0)
# cv.destroyAllWindows()

plt.figure(figsize=(8, 8))
plt.imshow(img[:, :, ::-1])
plt.show()
```

![image-20210222151912149](.\img\image-20210222151912149.png)





## 齐次坐标

齐次坐标就是将一个原本是n维的[向量](https://baike.baidu.com/item/向量/1396519)用一个n+1维向量来表示，是指一个用于投影几何里的[坐标系统](https://baike.baidu.com/item/坐标系统/4725756)，如同用于[欧氏几何](https://baike.baidu.com/item/欧氏几何/2650993)里的笛卡儿坐标一般。

### 二维平移矩阵

$$
\left[
\begin{matrix}
x^{'}\\
y^{'}\\
1
\end{matrix}
\right]=\left[
\begin{matrix}
1&0&t_{x}\\
0&1&t_{y}\\
0&0&1
\end{matrix}
\right]\cdot \left[
\begin{matrix}
x\\
y\\
1
\end{matrix}
\right]
$$


$$
P^{'}=T(t_{x},t_{y})\cdot P
$$

### 二维旋转矩阵


$$
\left[
\begin{matrix}
x^{'}\\
y^{'}\\
1
\end{matrix}
\right]=\left[
\begin{matrix}
\cos\theta&-\sin\theta&0\\
\sin\theta&\cos\theta&0\\
0&0&1
\end{matrix}
\right]\cdot \left[
\begin{matrix}
x\\
y\\
1
\end{matrix}
\right]
$$



$$
P^{'}=R(\theta)\cdot P
$$

### 二维缩放矩阵


$$
\left[
\begin{matrix}
x^{'}\\
y^{'}\\
1
\end{matrix}
\right]=\left[
\begin{matrix}
s_{x}&0&0\\
0&s_{y}&0\\
0&0&1
\end{matrix}
\right]\cdot \left[
\begin{matrix}
x\\
y\\
1
\end{matrix}
\right]
$$

$$
P^{'}=S(s_{x},s_{y})\cdot P
$$

## 逆变换

$$
T^{-1}=\left[
\begin{matrix}
1&0&-t_{x}\\
0&1&-t_{y}\\
0&0&1\\
\end{matrix}
\right]\\


R^{-1}=\left[
\begin{matrix}
\cos\theta&\sin\theta&0\\
-\sin\theta&\cos\theta&0\\
0&0&1\\
\end{matrix}
\right]\\

S^{-1}=\left[
\begin{matrix}
\frac{1}{s_{x}}&0&0\\
0&\frac{1}{s_{y}}&0\\
0&0&1\\
\end{matrix}
\right]\\
$$

## 二维复合变换

### 复合二维平移

$$
P^{'}=T(t_{2x},t_{2y})\cdot \{T(t_{1x},t_{1y})\cdot P \}
=\{  T(t_{2x},t_{2y}) \cdot T(t_{1x},t_{1y}) \}\cdot P
$$

$$
\left[
\begin{matrix}
1&0&t_{2x}\\
0&1&t_{2y}\\
0&0&1\\
\end{matrix}
\right] \cdot
\left[
\begin{matrix}
1&0&t_{1x}\\
0&1&t_{1y}\\
0&0&1\\
\end{matrix}
\right]=\left[
\begin{matrix}
1&0&t_{2x} +t_{1x}\\
0&1&t_{2y}+t_{1y}\\
0&0&1\\
\end{matrix}
\right]
$$





### 复合二维旋转

$$
P^{'}=R(\theta_{2}) \cdot \{ R(\theta_{1})\cdot P\}
=\{R(\theta_{2})  \cdot R(\theta_{1})\}\cdot P
$$



### 复合二维缩放

$$
\left[
\begin{matrix}
s_{2x}&0&0\\
0&s_{2y}&0\\
0&0&1
\end{matrix}
\right]\cdot \left[
\begin{matrix}
s_{1x}&0&0\\
0&s_{1y}&0\\
0&0&1
\end{matrix}
\right] = \left[
\begin{matrix}
s_{2x} \cdot s_{1x}&0&0\\
0&s_{2y} \cdot s_{1y}&0\\
0&0&1
\end{matrix}
\right]
$$



### 通过基准点旋转

1. 平移对象使基准点位置移动到坐标原点；
2. 绕坐标原点旋转
3. 平移对象使基准点回到原始位置

$$
\left[
\begin{matrix}
1&0&x_{r}\\
0&1&y_{r}\\
0&0&1
\end{matrix}
\right] \cdot

\left[
\begin{matrix}
\cos\theta&-\sin\theta&0\\
\sin\theta&\cos\theta&0\\
0&0&1
\end{matrix}
\right]\cdot
\left[
\begin{matrix}
1&0&-x_{r}\\
0&1&-y_{r}\\
0&0&1
\end{matrix}
\right]=\\

\left[
\begin{matrix}
\cos\theta&-\sin\theta&x_{r}(1-\cos\theta) + y_{r}\sin\theta\\
\sin\theta&\cos\theta&y_{r}(1-\cos\theta)-x_{r}\sin\theta\\
0&0&1
\end{matrix}
\right]
$$

### 通过基准点缩放

1. 平移对象使固定点与坐标原点重合
2. 对于坐标原点进行缩放
3. 使用步骤1的反向平移将对象回到原始位置

$$
\left[
\begin{matrix}
1&0&x_{f}\\
0&1&y_{f}\\
0&0&1\\
\end{matrix}
\right] \cdot
\left[
\begin{matrix}
s_{x}&0&0\\
0&s_{y}&0\\
0&0&1\\
\end{matrix}
\right]\cdot
\left[
\begin{matrix}
1&0&-x_{f}\\
0&1&-y_{f}\\
0&0&1\\
\end{matrix}
\right]=
\left[
\begin{matrix}
s_{x}&0&x_{f}(1-s_{x})\\
0&s_{y}&y_{f}(1-s_{y})\\
0&0&1\\
\end{matrix}
\right]
$$



## 三维几何变换

### 三维平移

$$
\left[
\begin{matrix}
x^{'}\\
y^{'}\\
z^{'}\\
1
\end{matrix}
\right] = \left[
\begin{matrix}
1&0&0&t_{x}\\
0&1&0&t_{y}\\
0&0&1&t_{z}\\
0&0&0&1
\end{matrix}
\right] \cdot
\left[
\begin{matrix}
x\\
y\\
z\\
1
\end{matrix}
\right]
$$

$$
P^{'}=T\cdot P
$$

### 三维旋转

1. 绕Z轴旋转
   $$
   x^{'}=x\cos\theta - y\sin\theta\\
   y^{'}=x\sin\theta + y\cos\theta\\
   z^{'}=z
   $$
   


$$
\left[
\begin{matrix}
x^{'}\\
y^{'}\\
z^{'}\\
1
\end{matrix}
\right] =

\left[
\begin{matrix}
\cos\theta & -\sin\theta &0&0\\
\sin\theta & \cos\theta &0&0\\
0&0&1&0\\
0&0&0&1
\end{matrix}
\right]\cdot
\left[
\begin{matrix}
x\\
y\\
z\\
1
\end{matrix}
\right]
$$

2. 绕X轴旋转

$$
y^{'}=y\cos\theta-z\sin\theta\\
z^{'}=y\sin\theta+z\cos\theta\\
x^{'}=x
$$


$$
\left[
\begin{matrix}
x^{'}\\
y^{'}\\
z^{'}\\
1
\end{matrix}
\right]=
\left[
\begin{matrix}
1&0&0&0\\
0&\cos\theta&-\sin\theta&0\\
0&\sin\theta&\cos\theta&0\\
0&0&0&1
\end{matrix}
\right] \cdot
\left[
\begin{matrix}
x\\
y\\
z\\
1
\end{matrix}
\right]
$$






3. 绕Y轴旋转

$$
z^{'}=z\cos\theta-x\sin\theta\\
x^{'}=z\sin\theta+x\cos\theta\\
y^{'}=y
$$


$$
\left[
\begin{matrix}
x^{'}\\
y^{'}\\
z^{'}\\
1
\end{matrix}
\right]=
\left[
\begin{matrix}
\cos\theta & 0&\sin\theta &0\\
0&1&0&0\\
-\sin\theta & 0& \cos \theta &0\\
0&0&0&1

\end{matrix}
\right] \cdot
\left[
\begin{matrix}
x\\
y\\
z\\
1

\end{matrix}
\right]
$$




4. 一般三维旋转

当旋转轴于坐标轴平行时：

- 平移对象使其旋转轴与平行于该轴的一个坐标轴重合
- 对于该轴完成指定的旋转
- 平移对象将其旋转轴移回到原来的位置

$$
P^{'}=T^{-1}\cdot R(\theta)\cdot P
$$

![image-20210222170325819](.\img\image-20210222170325819.png)

当旋转轴不平行坐标轴：

- 平移对象，使得旋转轴通过坐标原点
- 旋转对象使得旋转轴与某一坐标轴重合
- 绕坐标轴完成指定的旋转
- 利用逆旋转使旋转轴回到其原始方向
- 利用逆平移使旋转轴回到其原始位置

将旋转轴换到三个坐标轴的任意一个都可以，z轴比较方便选择，下面讨论使用z轴旋转

![image-20210222170512384](.\img\image-20210222170512384.png)

假设由两点确定旋转轴，如果沿着P2到P1的轴进行观察，并且旋转的方向为逆时针方向，则轴向量利用两点可以定义为
$$
V=  P_{2}-P{1}=(x_{2}-x_{1},y_2-y_1,z_2-z_1)
$$
沿旋转轴的单位向量u则定义为
$$
u=\frac{V}{|V|}=(a,b,c)=(\frac{x_2-x_1}{|V|},\frac{y_2-y_1}{|V|},\frac{z_2-z_1}{|V|})
$$
第一步建立旋转轴通过原点的平移变换矩阵
$$
T=\left[
\begin{matrix}
1&0&0&-x_1\\
0&1&0&-y_1\\
0&0&1&-z_1\\
0&0&0&1
\end{matrix}
\right]
$$


![image-20210222172040223](.\img\image-20210222172040223.png)



第二部将旋转轴与z轴重合变换，可以有多种方法实现，这里先绕x轴旋转，然后绕y轴旋转。绕x轴旋转将向量u变换到xz平面上，绕y轴旋转将u变到z轴上。

![image-20210222172605875](img\image-20210222172605875.png)



计算出使u变换到xz平面上的旋转角的正弦和余弦值，可以建立绕x轴旋转的 变换矩阵。该旋转角是u在yz平面上的投影与z轴正向的夹角

![image-20210222175049266](img\image-20210222175049266.png)


$$
u^{'}=(0,b,c)
$$

$$
\cos\alpha=\frac{u^{'}\cdot u_{z}}{|u^{'}|\cdot|u_{z}|}=\frac{c}{d}=\frac{c}{\sqrt{b^2+c^2}}
$$

$$
u^{'}\times u_z=u_x |u^{'}||u_z|\sin\alpha
$$


$$
\because u^{'}\times u_z = u_x\cdot b\\
\therefore  d \sin\alpha = b\\
\sin\alpha =\frac{b}{d}
$$
现在知道了正弦和余弦值，因此可以健建立绕x轴将u旋转到xz平面的旋转矩阵
$$
R_{x}(\alpha)=\left[
\begin{matrix}
1&0&0&0\\
0&\cos\theta&-\sin\theta&0\\
0&\sin\theta&\cos\theta&0\\
0&0&0&1
\end{matrix}
\right] = \left[
\begin{matrix}
1&0&0&0\\
0&\frac{c}{d}&-\frac{b}{d}&0\\
0&\frac{b}{d}&\frac{c}{d}&0\\
0&0&0&1
\end{matrix}
\right]
$$
下一步需要确定变换矩阵，此矩阵将在xz平面上的单位向量绕y轴逆时针旋转到z轴正方向。绕x轴宣旋转后，xz平面上的单位向量如下图。

![image-20210222182417883](img\image-20210222182417883.png)
$$
\cos\beta=\frac{u^{''} \cdot u_{z}}{|u^{''}| \cdot|u_{z}|} = d\\
\because u^{''}\times u_{z} = u_{y}|u^{''}||u_{z}|\sin\beta\\
且u^{''}\times u_{z} =u_{y}\cdot (-a)\\
\therefore \sin\beta = -a
$$

$$
R_{y}(\beta)=\left[
\begin{matrix}
\cos\beta & 0&\sin\beta &0\\
0&1&0&0\\
-\sin\beta & 0& \cos \beta &0\\
0&0&0&1

\end{matrix}
\right]=

\left[
\begin{matrix}
d & 0&-a &0\\
0&1&0&0\\
a & 0& d &0\\
0&0&0&1

\end{matrix}
\right]
$$


现在旋转轴已经和z轴重合，沿着z轴旋转指定角度
$$
R_{z}(\theta)=\left[
\begin{matrix}
\cos\theta & -\sin\theta &0&0\\
\sin\theta & \cos\theta &0&0\\
0&0&1&0\\
0&0&0&1
\end{matrix}
\right]
$$


最后就是旋转轴回到原来的位置,这个可以通过变换中的逆矩阵来完成


$$
R(\theta)=T^{-1} \cdot R^{-1}_{x}(\alpha)\cdot R^{-1}_{y}(\beta)\cdot R_{z}(\theta)\cdot R_{y}(\beta)\cdot R_{x}(\alpha)\cdot T
$$

## 复数



$$
z=a+bi ,z\in C ,a,b\in R,i^{2}=-1
$$

### 乘法

$$
z_{1}=a+bi\\
z_{2}=c+di\\
z_{1}\cdot z_{2} = (a+bi)(c+di)=ac-bd+(bc+ad)i
$$

把它看成是一个矩阵相乘
$$
\left[
\begin{matrix}
a&-b\\
b&a
\end{matrix}
\right]\cdot

\left[
\begin{matrix}
c\\
d
\end{matrix}
\right]
$$
把复数看成矩阵
$$
\left[
\begin{matrix}
a&-b\\
b&a
\end{matrix}
\right]
$$
把z2也转换
$$
\left[
\begin{matrix}
c&-d\\
d&c
\end{matrix}
\right]
$$

$$
z_{1}z_{2} = \left[
\begin{matrix}
a&-b\\
b&a
\end{matrix}
\right]
\left[
\begin{matrix}
c&-d\\
d&c
\end{matrix}
\right] =

\left[
\begin{matrix}
ac-bd &- (ad+bc)\\

ad+bc&ac-bd
\end{matrix}
\right]
$$


### 共轭

复数的模
$$
\| z\| = \sqrt{a^{2}+b^{2}}
$$

$$
如果z=a+bi，那么其共轭z^{*}=a-bi
$$

$$
\|z\|=zz^*
$$

$$
\left[
\begin{matrix}
a\\
b
\end{matrix}
\right] = 
\sqrt{a^{2} + b^{2}} \left[
\begin{matrix}
\frac{a}{\sqrt{a^{2} + b^{2}}}\\
\frac{b}{\sqrt{a^{2} + b^{2}}}\\
\end{matrix}
\right]=\|z\|\left[
\begin{matrix}
\frac{a}{\|z\|\ }\\
\frac{b}{ \|z\|\ }\\
\end{matrix}
\right] = \|z\|\ \left[
\begin{matrix}
\cos\theta\\
\sin\theta
\end{matrix}
\right]
$$



### 复数的几种写法

$$
代数：z=a+bi\\
向量：\left[
\begin{matrix}
a\\
b
\end{matrix}
\right]\\
矩阵：\left[
\begin{matrix}
a&-b\\
b&a
\end{matrix}
\right]\\
极坐标：z=r(\cos \theta + i\sin\theta)\\
指数形式：z=re^{i\theta}(通过欧拉公式转换)
$$



### 复数相乘与2D旋转

$$
假设复数 p = a+bi，乘上复数q=\cos \theta +i \sin\theta\\
pq=a\cos\theta-b\sin\theta+(a\sin\theta + b\cos\theta)i=a^{'}+b^{'}i\\
用矩阵表示\\
\left[
\begin{matrix}
a^{'}\\
b^{'}

\end{matrix}
\right]=
\left[
\begin{matrix}
\cos\theta & -\sin\theta\\
\sin\theta & \cos\theta\\

\end{matrix}
\right]\cdot\left[
\begin{matrix}
a\\
b
\end{matrix}
\right]
$$

$$
这不就是二维空间中点（a,b）绕原点逆时针旋转\theta角吗
$$



上式中复数q的模是1，我们假设是r
$$
pq=(a+bi)(r\cos\theta+ir\sin\theta)=ar\cos\theta-br\sin\theta+(ar\sin\theta+br\cos\theta)i\\

\left[
\begin{matrix}
a^{'}\\
b^{'}

\end{matrix}
\right]=
\left[
\begin{matrix}
\cos\theta & -\sin\theta\\
\sin\theta & \cos\theta\\

\end{matrix}
\right]\cdot\left[
\begin{matrix}
ar\\
br
\end{matrix}
\right]
$$

**所以两个复数相乘相当于模相乘，辐角相加**

##  四元数

既然使用复数的乘法可以描述二维的旋转，那么拓展一个维度是否能表示三维旋转呢，这个也正是四元数发明者William Hamilton最初的想法，也就是说使用
$$
z=a+ib+jc,i^2=j^2=−1
$$
但是很遗憾 两个值相乘得到的结果并不是三维的复数,William Hamilton经历了无数个日日夜夜，他绞尽脑汁也没想明白这个问题。终于有一天（1843年的一天），他意识到自己所需要的运算在三维空间中是不可能实现的，但在四维空间中是可以的。


$$
q=[s,v],s∈R,v∈R^3\\或者\\
q=[s,xi+yj+zk],s,x,y,z∈R
$$

### 四元数的运算

#### 相加

$$
A=a+bi+cj+dk ,\\ B=e + fi + gj + hk \\
C=A+B= (a+e) + (b+f)i + (c+g)j + (d+h)k
$$

#### 相减

$$
A=a+bi+cj+dk ,\\ B=e + fi + gj + hk \\
C=A-B= (a-e) + (b-f)i + (c-g)j + (d-h)k
$$

